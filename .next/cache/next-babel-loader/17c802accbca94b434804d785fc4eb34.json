{"ast":null,"code":"import _Object$values from \"@babel/runtime-corejs2/core-js/object/values\";\nimport _JSON$stringify from \"@babel/runtime-corejs2/core-js/json/stringify\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nimport _parseInt from \"@babel/runtime-corejs2/core-js/parse-int\";\nvar _jsxFileName = \"D:\\\\node\\\\delivery\\\\pages\\\\[id].js\";\nimport { makeStyles } from \"@material-ui/core\";\nimport AppBar from \"@material-ui/core/AppBar\";\nimport Button from \"@material-ui/core/Button\";\nimport Container from \"@material-ui/core/Container\";\nimport CssBaseline from \"@material-ui/core/CssBaseline\";\nimport Divider from \"@material-ui/core/Divider\";\nimport Grid from \"@material-ui/core/Grid\";\nimport IconButton from \"@material-ui/core/IconButton\";\nimport InputBase from \"@material-ui/core/InputBase\";\nimport Link from \"@material-ui/core/Link\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Toolbar from \"@material-ui/core/Toolbar\";\nimport Typography from \"@material-ui/core/Typography\";\nimport { Menu, Search } from \"@material-ui/icons\";\nimport ArrowBackIcon from \"@material-ui/icons/ArrowBack\";\nimport Skeleton from \"@material-ui/lab/Skeleton\";\nimport { useRouter } from \"next/router\";\nimport React, { useEffect, useState } from \"react\";\nimport Loadable from \"react-loadable\";\nimport AlertNotHasProducts from \"../components/AlertNotHasProducts\";\nimport ApiRest from \"../components/ApiRest\";\nimport Categorias from \"../components/Categorias\";\nimport Footer from \"../components/Footer\";\nimport LocalStorageHandler from \"../components/LocalStorageHandler\";\nimport MyMenu from \"../components/Menu\";\nimport Produtos from \"../components/Produtos\";\nimport SpinnerTeste from \"../components/SpinnerTeste/Produtos\";\nimport TotalPedidos from \"../components/TotalPedidos\";\nimport useReplaceString from \"../components/useReplaceString\";\nimport useWidth from \"../components/useWidth\";\nimport Fab from \"@material-ui/core/Fab\";\nvar NavigationBottom = Loadable({\n  loader: function loader() {\n    return import(\"../components/NavigationBottom\");\n  },\n  loading: function loading() {\n    return React.createElement(React.Fragment, null, React.createElement(Skeleton, {\n      height: \"80%\",\n      width: \"100%\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 37\n      },\n      __self: this\n    }));\n  }\n});\nvar dataCategorias = [{\n  nome: \"ALIMENTOS\",\n  quantidade: _parseInt(2),\n  mostrar: !0\n}, {\n  nome: \"BEBIDAS\",\n  quantidade: _parseInt(3),\n  mostrar: !0\n}, {\n  nome: \"BAZAR\",\n  quantidade: _parseInt(5),\n  mostrar: !0\n}, {\n  nome: \"DESCARTÁVEIS\",\n  quantidade: _parseInt(8),\n  mostrar: !0\n}, {\n  nome: \"MATINAIS\",\n  quantidade: _parseInt(4),\n  mostrar: !0\n}, {\n  nome: \"PERECÍVEIS\",\n  quantidade: _parseInt(45),\n  mostrar: !0\n}, {\n  nome: \"HIGIENE\",\n  quantidade: _parseInt(4),\n  mostrar: !0\n}, {\n  nome: \"LIMPEZA\",\n  quantidade: _parseInt(8),\n  mostrar: !0\n}];\nvar useStyles = makeStyles(function (theme) {\n  return {\n    \"@global\": {\n      body: {\n        background: \"url(../static/background.jpg)\",\n        backgroundAttachment: \"fixed\",\n        backgroundPosition: \"center\",\n        backgroundRepeat: \"no-repeat\",\n        backgroundSize: \"cover\"\n      },\n      ul: {\n        margin: 0,\n        padding: 0\n      },\n      li: {\n        listStyle: \"none\"\n      }\n    },\n    appBar: {\n      borderBottom: \"1px solid \".concat(theme.palette.divider)\n    },\n    toolbar: {\n      flexWrap: \"wrap\"\n    },\n    toolbarTitle: {\n      flexGrow: 1\n    },\n    link: {\n      margin: theme.spacing(1, 1.5)\n    },\n    cardGrid: {\n      paddingTop: theme.spacing(8),\n      paddingBottom: theme.spacing(8),\n      paddingLeft: theme.spacing(2),\n      paddingRight: theme.spacing(2),\n      border: \"0px solid blue\"\n    },\n    rootinput: {\n      borderRadius: 0,\n      display: \"flex\",\n      alignItems: \"center\",\n      width: \"100%\",\n      margin: \"0px auto\",\n      paddingLeft: 10,\n      paddingRight: 10,\n      paddingTop: 5,\n      paddingBottom: 5\n    },\n    textFieldInput: {\n      backgroundColor: theme.palette.common.white,\n      fontSize: 16,\n      width: \"100%\",\n      padding: \"10px 12px\",\n      transition: theme.transitions.create([\"border-color\", \"box-shadow\"]),\n      \"&:focus\": {\n        borderColor: \"#80bdff\",\n        boxShadow: \"0 0 0 0.2rem rgba(0,123,255,.25)\"\n      }\n    },\n    iconButton: {\n      padding: 10\n    },\n    divider: {\n      width: 1,\n      height: 28,\n      margin: 4\n    },\n    footerNavigationBottom: {\n      paddingLeft: theme.spacing(0),\n      paddingRight: theme.spacing(0),\n      background: \"white\",\n      border: \"0px solid gold\",\n      \"& p\": {\n        border: \"0px solid red\",\n        \"& span\": {}\n      },\n      \"& div\": {\n        border: \"0px solid lime\"\n      }\n    },\n    categorias: {\n      backgroundColor: \"white\"\n    }\n  };\n});\n\nvar Index = function Index(props) {\n  var router = useRouter();\n  var classes = useStyles();\n\n  var _React$useState = React.useState(0),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      value = _React$useState2[0],\n      setValue = _React$useState2[1];\n\n  var _React$useState3 = React.useState([]),\n      _React$useState4 = _slicedToArray(_React$useState3, 2),\n      produtosAsObject = _React$useState4[0],\n      setProdutosAsObject = _React$useState4[1];\n\n  var _React$useState5 = React.useState(\"\"),\n      _React$useState6 = _slicedToArray(_React$useState5, 2),\n      search = _React$useState6[0],\n      setSearch = _React$useState6[1];\n\n  var _useState = useState(!1),\n      _useState2 = _slicedToArray(_useState, 2),\n      countPedidosLocal = _useState2[0],\n      setCountPedidosLocal = _useState2[1];\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      anchorEl = _useState4[0],\n      setAnchorEl = _useState4[1];\n\n  var _useState5 = useState([]),\n      _useState6 = _slicedToArray(_useState5, 2),\n      data = _useState6[0],\n      setData = _useState6[1];\n\n  var _useState7 = useState(null),\n      _useState8 = _slicedToArray(_useState7, 2),\n      mobileMoreAnchorEl = _useState8[0],\n      setMobileMoreAnchorEl = _useState8[1];\n\n  var _useState9 = useState(true),\n      _useState10 = _slicedToArray(_useState9, 2),\n      iniciar = _useState10[0],\n      setIniciar = _useState10[1];\n\n  var _useState11 = useState({\n    config: []\n  }),\n      _useState12 = _slicedToArray(_useState11, 2),\n      empresa = _useState12[0],\n      setEmpresa = _useState12[1];\n\n  var _useState13 = useState(\"Carregando...\"),\n      _useState14 = _slicedToArray(_useState13, 2),\n      nome_fantasia = _useState14[0],\n      setNomeFantasia = _useState14[1];\n\n  var _useState15 = useState({\n    dados: [],\n    isLoading: false\n  }),\n      _useState16 = _slicedToArray(_useState15, 2),\n      produtos = _useState16[0],\n      setProdutos = _useState16[1];\n\n  var _useState17 = useState(null),\n      _useState18 = _slicedToArray(_useState17, 2),\n      empresaId = _useState18[0],\n      setEmpresaId = _useState18[1];\n\n  var _useState19 = useState(null),\n      _useState20 = _slicedToArray(_useState19, 2),\n      daaaaaaata = _useState20[0],\n      setDaaaaaaata = _useState20[1];\n\n  var screenSize = useWidth();\n  var isMenuOpen = Boolean(anchorEl);\n\n  function goBack() {\n    window.history.back();\n  }\n\n  useEffect(function () {\n    setData(JSON.parse(localStorage.getItem(\"products\")));\n    onAtualizarCount();\n\n    if (iniciar == true) {\n      setIniciar(false); //setProdutosAsObject(props.shows);\n    }\n  }, []);\n  /*\r\n  BUSCA OS DADOS DA EMPRESA\r\n  */\n\n  useEffect(function () {\n    var id = router.query.id;\n\n    var fetchData =\n    /*#__PURE__*/\n    function () {\n      var _ref = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee() {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.next = 2;\n                return ApiRest.get(\"/empresas/\" + id);\n\n              case 2:\n                result = _context.sent;\n                setEmpresa(result.data);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function fetchData() {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    fetchData();\n  }, []);\n  /**\r\n   * PRODUTOS\r\n   */\n\n  useEffect(function () {\n    var fetchData =\n    /*#__PURE__*/\n    function () {\n      var _ref2 = _asyncToGenerator(\n      /*#__PURE__*/\n      _regeneratorRuntime.mark(function _callee2() {\n        var result;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                if (!(empresaId !== null)) {\n                  _context2.next = 5;\n                  break;\n                }\n\n                _context2.next = 3;\n                return ApiRest.get(\"/produtos/empresa/\" + empresaId);\n\n              case 3:\n                result = _context2.sent;\n                setProdutos({\n                  data: result.data,\n                  isLoading: true\n                });\n\n              case 5:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function fetchData() {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    fetchData();\n  }, [empresaId]);\n  useEffect(function () {\n    if (!empresa.config) {\n      if (screenSize === \"xs\") {\n        setNomeFantasia(useReplaceString(empresa[\"0\"].nome_fantasia, 2));\n      } else {\n        setNomeFantasia(empresa[\"0\"].nome_fantasia);\n      }\n\n      setEmpresaId(empresa[\"0\"].id);\n    }\n  }, [empresa]);\n\n  function onChangeInputSearch(ev) {\n    var valor = ev.target.value;\n    setSearch(valor.toUpperCase());\n\n    if (valor.trim() !== \"\") {\n      /*let adults = Object.values(props.shows).filter(produto => {\r\n      if (produto.id !== undefined) {\r\n      if (produto.nome.toUpperCase().includes(valor.toUpperCase())) {\r\n      return produto;\r\n      }\r\n      }\r\n      });\r\n      setProdutosAsObject(adults);*/\n    } else {//setProdutosAsObject(props.shows);\n      }\n\n    if (ev.keyCode == 27) {\n      //setProdutosAsObject(props.shows);\n      setSearch(\"\");\n    }\n  }\n\n  function onAtualizarCount() {\n    setCountPedidosLocal(LocalStorageHandler.count(\"products\"));\n  }\n\n  function handleChange(event, newValue) {\n    setValue(newValue);\n  }\n\n  function handleProfileMenuOpen(event) {\n    if (LocalStorageHandler.count(\"products\") > 0) {\n      setAnchorEl(event.currentTarget);\n    }\n  }\n\n  function handleMobileMenuClose() {\n    setMobileMoreAnchorEl(null);\n  }\n\n  function handleMenuClose() {\n    setAnchorEl(null);\n    handleMobileMenuClose();\n  }\n\n  function confirmarPedido() {\n    alert(_JSON$stringify(LocalStorageHandler.getDataByKey(\"products\")));\n    LocalStorageHandler.remove(\"products\");\n  }\n\n  return React.createElement(React.Fragment, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 294\n    },\n    __self: this\n  }, React.createElement(CssBaseline, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295\n    },\n    __self: this\n  }), React.createElement(AppBar, {\n    position: \"fixed\",\n    color: \"default\",\n    elevation: 0,\n    className: classes.appBar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 296\n    },\n    __self: this\n  }, React.createElement(Toolbar, {\n    className: classes.toolbar,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 302\n    },\n    __self: this\n  }, React.createElement(IconButton, {\n    onClick: goBack,\n    className: classes.margin,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 311\n    },\n    __self: this\n  }, React.createElement(ArrowBackIcon, {\n    color: \"default\",\n    fontSize: \"large\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 312\n    },\n    __self: this\n  })), React.createElement(Typography, {\n    variant: \"h6\",\n    color: \"inherit\",\n    noWrap: true,\n    className: classes.toolbarTitle,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 314\n    },\n    __self: this\n  }, React.createElement(Link, {\n    href: \"../\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 320\n    },\n    __self: this\n  }, produtos.isLoading == false ? React.createElement(React.Fragment, null, React.createElement(Skeleton, {\n    variante: \"text\",\n    height: 20,\n    width: 200,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 323\n    },\n    __self: this\n  })) : React.createElement(React.Fragment, null, React.createElement(Grid, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 327\n    },\n    __self: this\n  }, nome_fantasia)))), !1 && React.createElement(React.Fragment, null, React.createElement(Button, {\n    onClick: confirmarPedido,\n    href: \"#\",\n    color: \"primary\",\n    variant: \"outlined\",\n    className: classes.link,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 334\n    },\n    __self: this\n  }, \"CONFIRMAR PEDIDO\")), React.createElement(IconButton, {\n    onClick: handleProfileMenuOpen,\n    \"aria-label\": \"Account of current user\",\n    \"aria-controls\": \"menu-appbar\",\n    \"aria-haspopup\": \"true\",\n    color: \"inherit\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 345\n    },\n    __self: this\n  }, React.createElement(TotalPedidos, {\n    countProdutos: countPedidosLocal,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 352\n    },\n    __self: this\n  })))), React.createElement(Container, {\n    maxWidth: \"md\",\n    className: classes.cardGrid,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 357\n    },\n    __self: this\n  }, produtos.isLoading == false && React.createElement(React.Fragment, null, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 360\n    },\n    __self: this\n  }), React.createElement(SpinnerTeste, {\n    data: [1, 2, 3, 4, 5, 6, 7],\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 361\n    },\n    __self: this\n  })), produtos.isLoading == true && empresaId != null && React.createElement(React.Fragment, null, React.createElement(\"br\", {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 366\n    },\n    __self: this\n  }), produtos.data.hasOwnProperty(\"erro\") && produtos.data ? React.createElement(React.Fragment, null, React.createElement(AlertNotHasProducts, {\n    label: \"N\\xE3o h\\xE1 Produtos para esta empresa.\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 369\n    },\n    __self: this\n  })) : React.createElement(React.Fragment, null, React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 373\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    md: \"3\",\n    xs: \"12\",\n    className: classes.categorias,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 374\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 375\n    },\n    __self: this\n  }, React.createElement(Categorias, {\n    datacat: dataCategorias,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 376\n    },\n    __self: this\n  }))), React.createElement(Grid, {\n    md: \"9\",\n    xs: \"12\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 379\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    item: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 380\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    justify: \"center\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 381\n    },\n    __self: this\n  }, React.createElement(Grid, {\n    container: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 382\n    },\n    __self: this\n  }, React.createElement(Paper, {\n    className: classes.rootinput,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 383\n    },\n    __self: this\n  }, React.createElement(IconButton, {\n    className: classes.iconButton,\n    \"aria-label\": \"Menu\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 384\n    },\n    __self: this\n  }, React.createElement(Menu, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 388\n    },\n    __self: this\n  })), React.createElement(InputBase, {\n    className: classes.textFieldInput,\n    placeholder: \"Pesquisar\",\n    inputProps: {\n      \"aria-label\": \"Search Google Maps\"\n    },\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 390\n    },\n    __self: this\n  }), React.createElement(Divider, {\n    className: classes.divider,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 397\n    },\n    __self: this\n  }), React.createElement(IconButton, {\n    className: classes.iconButton,\n    \"aria-label\": \"Search\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 398\n    },\n    __self: this\n  }, React.createElement(Search, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 402\n    },\n    __self: this\n  })))))), React.createElement(Grid, {\n    item: true,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 408\n    },\n    __self: this\n  }, _Object$values(produtos.data).map(function (product, _key) {\n    return React.createElement(React.Fragment, {\n      key: _key,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 411\n      },\n      __self: this\n    }, React.createElement(Produtos, {\n      callbackParent: function callbackParent(valor) {\n        return setCountPedidosLocal(valor);\n      },\n      produto: product,\n      id: product.id,\n      nome: product.nome.toUpperCase(),\n      imagem: product.imagem,\n      precoUnitario: product.preco,\n      descricao: product.descricao,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 412\n      },\n      __self: this\n    }));\n  }))))))), React.createElement(Container, {\n    className: classes.footerNavigationBottom,\n    maxWidth: \"xl\",\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 434\n    },\n    __self: this\n  }, React.createElement(Footer, {\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 435\n    },\n    __self: this\n  })), React.createElement(MyMenu, {\n    anchorEl: anchorEl,\n    handleMenuClose: handleMenuClose,\n    abrir: isMenuOpen,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 437\n    },\n    __self: this\n  }));\n};\n\nIndex.getInitialProps =\n/*#__PURE__*/\nfunction () {\n  var _ref3 = _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee3(ctx) {\n    var configSite;\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.next = 2;\n            return import(\"../db/config.dev.json\");\n\n          case 2:\n            configSite = _context3.sent;\n            return _context3.abrupt(\"return\", {\n              config: configSite\n            });\n\n          case 4:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n\n  return function (_x) {\n    return _ref3.apply(this, arguments);\n  };\n}();\n\nexport default Index;","map":null,"metadata":{},"sourceType":"module"}